/*
 * HelloPi.cpp
 *
 *  Created on: Apr 15, 2014
 *      Author: raspberry
 */

#include <iostream>

#include <websocketpp/config/asio_no_tls.hpp>
#include <websocketpp/server.hpp>
using namespace std;
typedef websocketpp::server<websocketpp::config::asio> server;

void on_message(websocketpp::connection_hdl hdl, server::message_ptr msg) {
        std::cout << msg->get_payload() << std::endl;
}

int main() {
    cout << "Hello RPi Development World !"<< endl;
    server print_server;
    cout << "Hello RPi Development World !"<< endl;
    print_server.set_message_handler(&on_message);
    cout << "Hello RPi Development World !"<< endl;

    print_server.init_asio();
    cout << "Hello RPi Development World !"<< endl;
    print_server.listen(8080);
    cout << "Hello RPi Development World !"<< endl;
    print_server.start_accept();
    cout << "Hello RPi Development World !"<< endl;
    print_server.run();
    cout << "Hello RPi Development World !"<< endl;
}
